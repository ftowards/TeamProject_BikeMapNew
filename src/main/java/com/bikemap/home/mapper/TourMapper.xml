<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.bikemap.home.tour.TourDaoImp">
 	<select id="selectAllTour" resultType="com.bikemap.home.tour.TourVO" parameterType="com.bikemap.home.tour.PagingVO">
		<![CDATA[
		select * from (select * from 
		(select noboard, title, to_char(departure,'YY/MM/DD') departure, to_char(arrive,'YY/MM/DD') arrive  from tour 
		order by noboard desc) 
		where rownum <= (#{nowPage} * #{onePageRecord}) order by noboard asc)
				where rownum <= #{lastPageRecordCount} order by noboard desc
		]]> 
 </select>
 <select id="getTotalTourRecord" resultType="int">
 	select count(noboard) from tour
 </select>
 <insert id="tourInsert" parameterType="com.bikemap.home.tour.TourVO">
	insert into tour(noboard, title, userid, reference, content, deadline, departure, arrive, place, distance, speed, budget, room, reggender, regage, writedate,ip)
	values(a_sq.nextval, #{title}, #{userid}, #{reference}, #{content}, #{deadline}, #{departure}, #{arrive}, #{place}, #{distance}, #{speed}, #{budget}, #{room}, #{reggender}, #{regage}, sysdate,#{ip} )
 </insert>
 <select id="tourSelect" parameterType="int" resultType="com.bikemap.home.tour.TourVO">
 select noboard, title, userid, reference, content, to_char(deadline,'YY/MM/DD') deadline,to_char(departure,'YY/MM/DD') departure, to_char(arrive,'YY/MM/DD') arrive, place, distance, speed, budget, room, reggender, regage, writedate 
 from tour where noboard=#{noboard}
 </select> 
 </mapper>